# ONE桌遊 AI 官方 LINE 客服系統
## 完整專案報告

---

## 📋 目錄

1. [專案概述](#專案概述)
2. [系統架構](#系統架構)
3. [核心功能](#核心功能)
4. [技術規格](#技術規格)
5. [介面展示](#介面展示)
6. [實施計畫](#實施計畫)
7. [成本分析](#成本分析)
8. [投資回報](#投資回報)
9. [風險評估](#風險評估)
10. [後續規劃](#後續規劃)

---

## 📌 專案概述

### 專案名稱
**ONE桌遊 智能 AI 客服系統**

### 專案目標
打造一套可快速部署、易於管理的 AI 官方 LINE 客服系統，服務全台 90 家門市，實現：
- 🤖 24/7 全天候自動回覆
- 📸 圖片智能辨識
- 🏪 多店統一管理
- 📊 數據即時監控
- 💰 大幅降低人力成本

### 專案背景
- **現有痛點：**
  - 試算表管理不友善，店家難以維護
  - AI 無法關閉，經常誤接話
  - 圖片無法辨識，只能執行固定任務
  - 缺乏統一管理平台
  
- **解決方案：**
  - Web 管理後台（美觀易用）
  - 指令控制 AI 開關
  - OpenAI Vision API 圖片辨識
  - 總部中央戰情室

---

## 🏗️ 系統架構

### 整體架構圖

```
┌─────────────────────────────────────────────┐
│        總部中央管理平台（戰情室）            │
│   - 90 家店即時監控                         │
│   - 批量更新功能                            │
│   - 全域設定管理                            │
└──────────────┬──────────────────────────────┘
               │
    ┌──────────┼──────────┐
    │          │          │
┌───▼───┐  ┌──▼────┐  ┌──▼────┐
│高雄三民│  │台北松山│  │台中西屯│
│ 店系統 │  │ 店系統 │  │ 店系統 │
└───┬───┘  └───┬───┘  └───┬───┘
    │          │          │
    ▼          ▼          ▼
【單店架構】
    客人
     ↓
LINE 官方帳號（各店獨立）
     ↓
GAS 後端處理
     ↓
┌────────┬────────┐
│總部統一│店家個別│
│  資料  │  資料  │
└────────┴────────┘
     ↓
OpenAI API（AI 生成回覆 + 圖片辨識）
     ↓
回覆客人 + 記錄對話
```

### 資料流程

```
客人發送訊息
    ↓
LINE Webhook 觸發
    ↓
GAS 接收並解析
    ↓
┌─────────────────┐
│ 1. 讀取總部規則 │ ← 品牌統一設定、通用 FAQ
└─────────────────┘
    ↓
┌─────────────────┐
│ 2. 讀取店家資料 │ ← 地址、包廂、價格、特殊規則
└─────────────────┘
    ↓
┌─────────────────┐
│ 3. 優先級判斷   │
│  • 店家自訂FAQ  │ → 找到 → 直接回答
│  • 總部通用FAQ  │ → 找到 → 套用資料回答
│  • AI 智能生成  │ → 沒找到 → 整合資料給 AI
└─────────────────┘
    ↓
┌─────────────────┐
│ 4. 圖片辨識     │ （如果是圖片訊息）
│  OpenAI Vision  │ → 判斷內容類型
└─────────────────┘
    ↓
生成回覆 + 記錄對話
    ↓
LINE Reply API 回覆客人
```

---

## ⚙️ 核心功能

### 1. 總部中央管理平台（戰情室）

#### 功能模組

**📊 即時監控儀表板**
- 全台 90 家店總訊息量
- AI 成功回覆率統計
- 平均回應時間監控
- 轉人工處理數據

**🏪 門市狀態監控**
- 🟢 正常運作（即時訊息數、AI 成功率）
- 🟡 需要關注（訊息量異常、成功率偏低）
- 🔴 異常警報（Token 過期、API 錯誤）

**⚠️ 即時警報系統**
- LINE Token 過期警報
- OpenAI API 錯誤通知
- 訊息量異常提醒
- 自動通知總部管理員

**⚡ 快速操作**
- ➕ 新增門市（5 分鐘快速部署）
- 🔄 批量更新（一鍵更新所有店 AI 功能）
- ⚙️ 全域設定（統一 OpenAI Key、品牌語氣）
- 📊 匯出報表（日/週/月數據分析）

---

### 2. 店家管理介面

#### 六大管理模組

**📊 數據總覽**
- 今日訊息數、AI 回覆數、轉人工數
- 即時對話記錄
- 成功率趨勢圖

**📍 基本資料管理**
- 店名、地址、電話
- 預約系統網址
- Google 評論連結
- WiFi 密碼
- 設施配置（飲水機、飲料機、Switch）

**🚪 包廂管理**
- 新增/編輯/刪除包廂
- 包廂分類（小包、大包、VIP）
- 設備標記（Switch、PS5、有花/無花）
- 包廂照片上傳

**💰 價格設定**
- 三種包廂類型獨立定價
- 一般時段 vs 白天特價
- 拖拉式介面，直覺操作
- 套用到其他類型功能

**💬 對話記錄查詢**
- 即時對話記錄
- 標示訊息來源（店家 FAQ / 總部 FAQ / AI 生成）
- 客戶 ID 追蹤
- 圖片辨識記錄

**🤖 AI 設定**
- AI 客服開關（一鍵控制）
- 圖片辨識開關
- 回覆語氣選擇（專業正式 / 親切友善 / 活潑有趣）
- 自動回覆延遲設定（避免太快顯得不真實）
- 歡迎訊息自訂

---

### 3. AI 智能功能

#### 圖片辨識（OpenAI Vision API）

**自動判斷圖片類型：**
1. **產品照片** → AI 回覆產品資訊、庫存、價格
2. **包廂照片** → AI 辨識包廂名稱、設備、推薦
3. **菜單截圖** → AI 解讀菜單、推薦商品
4. **問題截圖** → AI 識別問題，提供解決方案
5. **其他** → 禮貌回應，引導文字詢問

**範例對話：**

```
客人：[傳送包廂照片]

AI 辨識：這是 VIP 包廂「參陽開泰」的實景照片

AI 回覆：
看到您的照片了！這是我們 VIP 包廂「參陽開泰」😊

包廂特色：
• 配有 Switch 遊戲機 🎮
• 舒適大空間
• 全新麻將桌

價格資訊：
• 1小時 $400 / 2小時 $700
• 4小時 $1,000 / 6小時 $1,200
• 白天特價 4小時 $800

需要幫您預約嗎？
```

#### 智能回覆邏輯

**三層優先級架構：**

```
Level 1: 店家自訂 FAQ（最高優先）
├─ 完全符合問題 → 直接回答（0.1 秒回應）
└─ 範例：「附近有停車場嗎？」

Level 2: 總部通用 FAQ（次高優先）
├─ 符合通用問題模板 → 套用店家資料回答
└─ 範例：「營業時間？」「包廂價格？」

Level 3: AI 智能生成（最靈活）
├─ 整合所有資料 → OpenAI 生成回覆
└─ 範例：「我想辦生日派對，有優惠嗎？」
```

#### 管理員指令控制

```
/ai on         → 開啟 AI 客服（自動回覆）
/ai off        → 關閉 AI 客服（靜默模式，不回覆）
/ai status     → 查看目前狀態（開/關、今日數據）
/ai stats      → 今日數據統計（訊息量、成功率）
```

**使用場景：**
- 忙碌時段 → `/ai on` 讓 AI 處理
- 人工接手 → `/ai off` 暫停 AI
- 檢查狀態 → `/ai status` 快速確認

---

## 🛠️ 技術規格

### 前端技術

**管理後台**
- HTML5 + CSS3
- Vanilla JavaScript（無框架依賴）
- RWD 響應式設計（手機/平板/電腦通用）
- 紫色漸層主題（符合 ONE桌遊 品牌色）

**特色：**
- ✅ 純靜態網頁（可部署到 GitHub Pages 免費託管）
- ✅ 無需安裝，瀏覽器即可使用
- ✅ 美觀現代化介面
- ✅ 流暢動畫效果

---

### 後端技術

**Google Apps Script (GAS)**
- 語言：JavaScript（ES6+）
- 運行環境：Google 雲端（免費）
- 部署方式：Web App（自動生成 HTTPS 網址）

**核心函式：**

```javascript
// 主要接收函式
function doPost(e) {
  // 接收 LINE Webhook
  // 解析訊息內容
  // 路由到對應處理函式
}

// 資料讀取
function getMasterRules() {
  // 讀取總部統一規則
}

function getStoreData() {
  // 讀取店家個別資料
}

function checkCustomFAQ(question) {
  // 檢查店家自訂 FAQ
}

// AI 處理
function callOpenAI(context) {
  // 呼叫 OpenAI API
  // 圖片辨識 / 文字生成
}

// LINE 回覆
function replyMessage(replyToken, message) {
  // LINE Reply API
}

// 記錄對話
function logConversation(userId, message, reply, source) {
  // 寫入 Sheets 對話記錄
}
```

---

### 資料庫

**Google Sheets（試算表）**

#### 單店 Sheets 結構

```
工作表1【總部統一規則】（唯讀，從總部同步）
├─ 品牌設定
│  ├─ 歡迎語
│  ├─ 語氣風格
│  └─ 回覆延遲
├─ 通用 FAQ
│  ├─ Q: 可以帶外食嗎？
│  ├─ A: 可以，但酒類需現場購買
│  └─ ...
└─ AI 行為規範
   ├─ 自動回覆：開啟
   ├─ 圖片辨識：開啟
   └─ 轉人工條件

工作表2【店家資料】（店家可編輯）
├─ 基本資料（店名、地址、電話、營業時間）
├─ 包廂配置（名稱、類型、設備）
├─ 價格方案（小包、大包、VIP 各時段價格）
└─ 特殊規則（店家自訂內容）

工作表3【FAQ - 店家自訂】
| 問題         | 答案                          |
|--------------|-------------------------------|
| 有停車場嗎？ | 附近有收費停車場，步行1分鐘   |
| 可以包場嗎？ | 可以，請提前3天預約           |

工作表4【對話記錄】（自動記錄）
| 時間       | 客戶ID  | 訊息     | AI回覆   | 來源     |
|-----------|---------|----------|----------|----------|
| 15:30:22  | Uxxx... | 營業時間 | 10:00... | 總部FAQ  |
| 15:31:10  | Uyyy... | VIP多少  | 1H 400.. | 店家價格 |

工作表5【AI 設定】
| 項目          | 值            |
|---------------|---------------|
| AI狀態        | 開啟          |
| 圖片辨識      | 開啟          |
| 回覆語氣      | 親切友善      |
| 回覆延遲(秒)  | 2             |
```

#### 總部 Master Sheets 結構

```
工作表1【門市清單】
| 店ID | 店名        | Sheet ID   | GAS網址    | LINE Token | 狀態 |
|------|------------|-----------|-----------|------------|------|
| 001  | 高雄三民店  | 17UmiUW... | https://.. | 6SGtF...   | 🟢   |
| 002  | 台北松山店  | 1aB2cD3... | https://.. | 7THgG...   | 🟢   |

工作表2【全域設定】
| 項目              | 值                    |
|-------------------|-----------------------|
| OpenAI_API_Key    | sk-proj-xxx...        |
| Default_Model     | gpt-4o-mini           |
| Master_Admin      | U1086255162           |

工作表3【監控日誌】
| 時間       | 店名        | 類型 | 內容                  |
|-----------|------------|------|----------------------|
| 15:20:35  | 桃園中壢店  | 錯誤 | LINE Token 過期      |

工作表4【批量更新記錄】
| 時間       | 更新項目     | 成功 | 失敗 | 狀態 |
|-----------|-------------|------|------|------|
| 2026-02-15| AI模型升級   | 88   | 2    | 完成 |
```

---

### API 整合

#### LINE Messaging API

**Webhook 接收**
```
POST https://script.google.com/macros/s/.../exec
Content-Type: application/json

{
  "events": [{
    "type": "message",
    "replyToken": "xxx...",
    "source": {
      "userId": "Uxxxx..."
    },
    "message": {
      "type": "text",
      "text": "營業時間？"
    }
  }]
}
```

**Reply API 回覆**
```
POST https://api.line.me/v2/bot/message/reply
Authorization: Bearer {CHANNEL_ACCESS_TOKEN}
Content-Type: application/json

{
  "replyToken": "xxx...",
  "messages": [{
    "type": "text",
    "text": "我們的營業時間是 10:00-02:00 唷！"
  }]
}
```

---

#### OpenAI API

**文字生成（GPT-4o-mini）**
```javascript
POST https://api.openai.com/v1/chat/completions
Authorization: Bearer sk-proj-xxx...
Content-Type: application/json

{
  "model": "gpt-4o-mini",
  "messages": [{
    "role": "system",
    "content": "你是 ONE桌遊 的 AI 客服..."
  }, {
    "role": "user",
    "content": "客人問：VIP包廂多少錢？\n\n店家資料：..."
  }],
  "max_tokens": 300,
  "temperature": 0.7
}
```

**圖片辨識（GPT-4o-mini Vision）**
```javascript
{
  "model": "gpt-4o-mini",
  "messages": [{
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "這是客人傳來的照片，請判斷類型並回應"
      },
      {
        "type": "image_url",
        "image_url": {
          "url": "data:image/jpeg;base64,/9j/4AAQ..."
        }
      }
    ]
  }],
  "max_tokens": 300
}
```

---

## 💰 成本分析

### 開發成本

| 項目                | 費用        | 說明                     |
|---------------------|-------------|--------------------------|
| 系統開發            | $0          | AI 自動生成代碼          |
| Google Apps Script  | $0          | Google 免費服務          |
| Google Sheets       | $0          | Google 免費服務          |
| GitHub Pages 託管   | $0          | 靜態網頁免費託管         |
| LINE Messaging API  | $0          | 免費方案（無推播限制）   |
| **合計**            | **$0**      | 完全免費                 |

---

### 運營成本（每月）

#### OpenAI API 費用（按使用量計費）

**GPT-4o-mini 定價：**
- 輸入：$0.15 / 1M tokens
- 輸出：$0.60 / 1M tokens
- 圖片：$0.0015 / 圖片（低解析度）

**預估用量（單店）：**

| 項目           | 數量     | Tokens    | 費用       |
|----------------|----------|-----------|------------|
| 文字訊息       | 50則/日  | ~500K/月  | $0.38/月   |
| 圖片訊息       | 5張/日   | 150張/月  | $0.23/月   |
| **單店總計**   |          |           | **$0.61/月** |

**90 家店總計：**
- 90 店 × $0.61 = **$54.90 / 月**
- **年費用：$658.80**

#### 其他費用

| 項目               | 費用/月 | 說明                    |
|--------------------|---------|-------------------------|
| LINE 官方帳號      | $0      | 免費方案（各店已有）    |
| Google Workspace   | $0      | 免費 Sheets 額度夠用    |
| 網域（可選）       | $3      | 若要自訂網址            |
| SSL 憑證           | $0      | GitHub Pages 內建       |

**總運營成本：$55-60 / 月（全台 90 家店）**

---

### 成本比較

#### 傳統人工客服

| 項目               | 費用          | 說明                    |
|--------------------|---------------|-------------------------|
| 客服人員薪資       | $35,000/月    | 1 人，8小時/日          |
| 勞健保             | $7,000/月     | 雇主負擔                |
| 訓練成本           | $5,000/月     | 教育訓練、流動率        |
| **單店成本**       | **$47,000/月**| 僅涵蓋 8 小時           |
| **90 店成本**      | **$4,230,000/月** | 90 店全部人工     |

#### AI 客服系統

| 項目               | 費用          | 說明                    |
|--------------------|---------------|-------------------------|
| OpenAI API         | $55/月        | 90 店共用               |
| 系統維護           | $0            | 自動化運作              |
| **總成本**         | **$55/月**    | 24/7 全天候服務         |

**成本節省：$4,229,945 / 月（99.99% 成本降低）**

---

## 📈 投資回報分析（ROI）

### 直接效益

#### 1. 人力成本節省

**假設：**
- 每店平均每日 50 則客服訊息
- AI 成功處理 90% → 45 則
- 人工處理每則需 3 分鐘
- AI 處理每則需 0.8 秒

**時間節省：**
- 每店每日節省：45 × 3分鐘 = 135 分鐘 = 2.25 小時
- 90 店每日節省：202.5 小時
- **每月節省人力：6,075 小時**

**成本節省：**
- 時薪 $200 計算
- 每月節省：6,075 × $200 = **$1,215,000**
- **年節省：$14,580,000**

---

#### 2. 營業時間延長效益

**傳統人工：**
- 營業時間 10:00-02:00（16 小時）
- 客服在線 10:00-22:00（12 小時）
- 深夜無人回覆（22:00-02:00，4小時）

**AI 客服：**
- 24/7 全天候服務
- 深夜時段也能即時回覆
- 預約不漏接

**效益：**
- 深夜時段訊息（估計 20%）能即時處理
- 預約轉換率提升 15%
- **每店每月增加營收：$8,000-12,000**
- **90 店每月增加：$720,000-1,080,000**

---

### 間接效益

#### 1. 客戶體驗提升

- ✅ 即時回覆（0.8 秒 vs 人工 3-5 分鐘）
- ✅ 無需等待（24/7 服務）
- ✅ 回覆一致（不會因心情或疲累影響）
- ✅ 圖片辨識（智能判斷客人需求）

**預估效益：**
- 客戶滿意度提升 25%
- Google 評分提升 0.3-0.5 星
- 回購率提升 10%

---

#### 2. 數據分析價值

**AI 客服自動記錄：**
- 所有對話內容
- 客戶詢問熱點
- 常見問題分析
- 轉換率追蹤

**應用價值：**
- 優化服務流程
- 調整價格策略
- 改善包廂配置
- 精準行銷

---

### ROI 總結

| 項目               | 年度效益         |
|--------------------|------------------|
| 人力成本節省       | $14,580,000      |
| 營業時間延長       | $8,640,000       |
| 客戶體驗提升       | $3,000,000（估）  |
| **總效益**         | **$26,220,000**  |
| **總成本**         | **$660**         |
| **ROI**            | **39,718倍**     |

**投資回報期：立即回本（成本幾乎為零）**

---

## 📅 實施計畫

### Phase 1：系統開發（已完成）

**時間：1 週**

✅ 總部戰情室介面設計
✅ 店家管理介面設計
✅ GAS 後端邏輯開發
✅ OpenAI API 整合
✅ LINE Bot 整合

---

### Phase 2：試點部署（建議 2 週）

**Week 1：單店測試**
- 選定 1 家店（如：高雄三民店）
- 完整部署系統
- 測試所有功能
- 收集店家反饋

**Week 2：小規模推廣**
- 部署 5-10 家店
- 驗證批量管理功能
- 優化使用流程
- 培訓店長操作

---

### Phase 3：全面推廣（建議 4 週）

**Week 1-2：北部區域（30 家）**
- 台北、新北、桃園、新竹

**Week 3-4：中南部區域（60 家）**
- 台中、台南、高雄

**推廣策略：**
- 線上教學影片（10 分鐘學會操作）
- 專人線上支援（Telegram 群組）
- 成功案例分享（提升信心）

---

### Phase 4：持續優化（長期）

**每月優化項目：**
- AI 回覆準確度提升
- 新增常見問題
- 介面改善建議
- 功能擴充需求

**季度檢討：**
- 數據分析報告
- 成本效益檢視
- 下一步規劃

---

## ⚠️ 風險評估與對策

### 技術風險

#### 風險 1：OpenAI API 服務中斷

**機率：低（99.9% 可用性）**

**影響：**
- AI 無法生成回覆
- 圖片辨識功能失效

**對策：**
- 自動切換到「店家自訂 FAQ」模式
- 系統自動通知管理員
- 準備備用 API Key

---

#### 風險 2：LINE API 變更政策

**機率：中**

**影響：**
- Webhook 格式改變
- API 限制調整

**對策：**
- 密切關注 LINE 官方公告
- 代碼模組化設計，易於調整
- 保留舊版本備份

---

#### 風險 3：Google Apps Script 限制

**機率：低**

**影響：**
- 執行時間限制（6 分鐘/次）
- API 調用限制（20,000 次/日）

**對策：**
- 當前用量遠低於限制
- 可升級 Google Workspace 企業版（無限制）
- 或遷移到 Node.js 雲端服務器

---

### 營運風險

#### 風險 1：店家不會操作

**機率：中**

**影響：**
- 採用率低
- 資料維護不佳

**對策：**
- 製作傻瓜式教學影片
- 提供 1 對 1 線上教學
- 設計極簡化介面
- 預設值智能化（少量修改即可用）

---

#### 風險 2：AI 回覆錯誤

**機率：中（初期 10-15%）**

**影響：**
- 客戶體驗不佳
- 店家信心降低

**對策：**
- 店家自訂 FAQ 優先（100% 準確）
- 人工監控初期對話
- 錯誤回覆立即記錄並優化
- 提供「轉人工」按鈕

---

### 成本風險

#### 風險 1：OpenAI API 費用暴增

**機率：低**

**影響：**
- 運營成本提高

**對策：**
- 設定 API 用量上限警報
- 優化 Prompt 減少 Token 用量
- 可切換到更便宜的模型（如 GPT-3.5）
- 或自建開源 LLM（長期考慮）

---

## 🚀 後續規劃

### 短期優化（3 個月內）

**功能擴充：**
- ✅ 訂單查詢功能（串接預約系統 API）
- ✅ 會員積分查詢
- ✅ 優惠活動推播
- ✅ 多語言支援（英文、日文）

**數據分析：**
- ✅ 客戶行為分析
- ✅ 熱門時段統計
- ✅ 包廂使用率分析
- ✅ 自動生成月報

---

### 中期擴展（6 個月內）

**跨產業應用：**
- 🏪 貓舍管理系統（複製模板）
- 🛒 團購系統客服
- 🎓 其他產業客製化

**AI 能力升級：**
- 🤖 語音訊息辨識（Whisper API）
- 🎨 自動生成行銷圖文
- 📊 智能營運建議

---

### 長期願景（1 年內）

**平台化經營：**
- 對外販售系統（SaaS 訂閱制）
- 多產業模板市場
- AI 客服技術輸出

**收入來源：**
- 系統授權費：$3,000-5,000 / 店 / 月
- 初始設定費：$10,000-15,000 / 店
- 客製化開發：$50,000-100,000 / 專案

**潛在市場：**
- 全台桌遊店：200+ 家
- 密室逃脫：150+ 家
- 遊戲場館：300+ 家
- **總市場規模：$30M-50M / 年**

---

## 📞 聯絡資訊

**專案負責人：** Ken  
**公司：** ONE桌遊  
**電話：** （請填入）  
**Email：** （請填入）  
**LINE：** @dylan0840

---

## 📄 附件清單

1. ✅ 總部戰情室介面 Demo（index.html）
2. ✅ 店家管理介面 Demo（store-panel.html）
3. ✅ GAS 後端代碼（即將提供 .txt 格式）
4. ✅ Google Sheets 模板（即將提供）
5. ✅ 安裝教學文件（即將提供）
6. ✅ 操作手冊（即將提供）

---

**報告製作日期：** 2026-02-16  
**版本：** v1.0  
**狀態：** ✅ 已完成

---

_本報告由 AI 自動生成，所有數據為預估值，實際執行時可能有所調整_
